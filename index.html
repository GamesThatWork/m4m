<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hello World</title>
    <script src="pixi.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/PixiPlugin.min.js"></script>
  </head>
  <body>
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
    </style>




<script type="module">

const app = new PIXI.Application();
document.body.appendChild(app.view);
const win = document.querySelector("canvas");





//********************* test the linechart ****************
   
import  { newLineChart } from './linechart.js';
 



let wavelength=25;

const shockwave= (n, count=500)=>{
  let buf =[];
  for( let x=0; x<count; x++) 
    buf[x]=  
        x<n+wavelength?  Math.sin( ((0 + (n-x))/wavelength ) *Math.PI)  / (n**2-n*x)
    :      0
  // experimental power equations -- no joy  
  //   1/(n-x) * -Math.sin(((x-n)*2    )*Math.PI/50)  
  //    x<n? /* (x)       **4  / n**4   * */ -Math.sin((x-n)*2*Math.PI/50)  
  // :  x<n*2? /* (2*n-x)  **77  / n**77  * */ -Math.sin((x-n)*2*Math.PI/50) 
  //  :  0;
  return buf;
}

const g = newLineChart (  {  parent:app.stage, data: null,
                        x:{  min:0.1, max:500,   px:win.width}, 
                        y:{  min:-.00081, max:.005,  px:win.height}, 
                          })
                          .show();

g.dragReport( e=> console.log(e) );







var count=0;
app.ticker.add( t=> {
  let n = Math.floor( (Date.now()/4) %500 );
  //let n = count++ %500;
    if (n<5)  g.reset();
    g.plot( shockwave( n )); 
    });



//********************* test the reticle ********************
import  { newReticle } from './reticle.js';

/*
const r = newReticle(  {  parent:app.stage, 
                          min:{radius:50,heat:1}, 
                          max:{radius:70,heat:1}
                        })
                          .move(win.width/2,win.height/2)
                          .show();

win.addEventListener("mousemove", e=> r.move(e.clientX, e.clientY) );
win.addEventListener("mouseleave",e=> 
    gsap.to(r, {x:win.width/2, y:win.height/2, duration: .5, ease: "elastic.out(1.1, 0.2 )"}));
win.addEventListener("mouseenter",e=> 
    gsap.from( r, {immediacy:0, duration:1, ease: "linear"}));
*/
    </script>
  </body>
</html>*