<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hello World</title>
    <script src="pixi.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/PixiPlugin.min.js"></script>
  </head>
  <body>
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
    </style>




<script type="module">

const app = new PIXI.Application();
document.body.appendChild(app.view);
const win = document.querySelector("canvas");






//********************* test the graph ****************
   
import  { newLineChart } from './linechart.js';
 



let n=140

const shockwave= (n, count=500)=>{
  let buf =[];
  for( let x=0; x<count; x++) 
    buf[x]= //(500-n)*
    x<n?  1/(n-x) * -Math.sin(((x-n)*2)*Math.PI/50)  
:      0//   1/(n-x) * -Math.sin(((x-n)*2    )*Math.PI/50)  
  //    x<n? /* (x)       **4  / n**4   * */ -Math.sin((x-n)*2*Math.PI/50)  
  // :  x<n*2? /* (2*n-x)  **77  / n**77  * */ -Math.sin((x-n)*2*Math.PI/50) 
  //  :  0;
  return buf;
}

const g = newLineChart (  {  parent:app.stage, data: shockwave(100),
                        x:{ /*min:0, max:1,*/ px:win.width}, 
                        y:{ /*min:0, max:1,*/ px:win.height}, 
                          })
                          .show();

app.ticker.add( t=> g.plot( shockwave( (Date.now()/10)%500 )) )                          




//********************* test the reticle ********************
import  { newReticle } from './reticle.js';
const r = newReticle(  {  parent:app.stage, 
                          min:{radius:50,heat:1}, 
                          max:{radius:70,heat:1}
                        })
                          .move(win.width/2,win.height/2)
                          .show();

win.addEventListener("mousemove", e=> r.move(e.clientX, e.clientY) );
win.addEventListener("mouseleave",e=> 
    gsap.to(r, {x:win.width/2, y:win.height/2, duration: .5, ease: "elastic.out(1.1, 0.2 )"}));
win.addEventListener("mouseenter",e=> 
    gsap.from( r, {immediacy:0, duration:1, ease: "linear"}));

    </script>
  </body>
</html>*